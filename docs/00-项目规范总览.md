# 项目规范总览

> 本文档是项目开发规范的索引文档，适用于 Java Spring Boot 后端项目。

## 文档版本

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2025-01-06 | 初始版本 |

---

## 1. 项目信息（按实际项目填写）

```yaml
项目名称: {project-name}
项目路径: {project-path}
基础包名: com.{company}.{project}
```

### 1.1 技术栈

| 类别 | 技术 | 版本 |
|------|------|------|
| JDK | OpenJDK / Temurin | 17+ |
| 核心框架 | Spring Boot | 3.x |
| ORM框架 | MyBatis-Plus | 3.5.x |
| API文档 | Knife4j | 4.x |
| 数据库 | MySQL | 8.0+ |
| 缓存 | Redis | 7.0+ |
| 构建工具 | Maven | 3.8+ |
| 工具库 | Hutool | 5.8.x |
| 认证 | JWT (JJWT) | 0.11.x |
| 连接池 | Druid | 1.2.x |

### 1.2 模块结构（推荐）

```
{project}/
├── {project}-common/          # 通用模块（工具类、通用配置、基础组件）
├── {project}-core/            # 业务核心模块（实体、服务、数据访问）
├── {project}-admin/           # 管理后台模块（Web端接口）
├── {project}-api/             # 对外接口模块（App端/开放接口/回调）
└── docs/                      # 项目文档
```

**模块依赖关系**：
```
{project}-admin ──┐
                  ├──► {project}-core ──► {project}-common
{project}-api ────┘
```

### 1.3 包结构规范

```
com.{company}.{project}.{module}/
├── controller/             # 控制器层
├── service/                # 服务接口层
│   └── impl/               # 服务实现层
├── mapper/                 # 数据访问层
├── entity/                 # 实体类
├── dto/                    # 数据传输对象
│   ├── request/            # 请求DTO
│   └── response/           # 响应DTO
├── vo/                     # 视图对象（可选）
├── enums/                  # 枚举类
└── config/                 # 模块配置类
```

---

## 2. 规范文档索引

### 2.1 开发规范

| 文档 | 路径 | 说明 |
|------|------|------|
| 开发规范 | [01-开发规范.md](./01-开发规范.md) | 数据库/日志/注释/安全/Git提交规范 |
| 接口规范 | [02-接口规范.md](./02-接口规范.md) | URL格式/端类型/HTTP方法/响应格式 |
| 代码模板 | [03-代码模板.md](./03-代码模板.md) | 完整CRUD代码模板 |
| 公共类规范 | [04-公共类规范.md](./04-公共类规范.md) | R类/异常/Redis/工具类规范 |

### 2.2 部署运维

| 文档 | 路径 | 说明 |
|------|------|------|
| Docker部署 | [05-Docker部署.md](./05-Docker部署.md) | Docker Compose 完整部署方案 |

### 2.3 AI辅助开发

| 文档 | 路径 | 说明 |
|------|------|------|
| AI开发指南 | [06-AI开发指南.md](./06-AI开发指南.md) | Claude/AI 辅助开发规范 |

### 2.4 代码规范工具

| 文件 | 路径 | 说明 |
|------|------|------|
| EditorConfig | [.editorconfig](../config/.editorconfig) | 编辑器统一配置 |
| Checkstyle | [checkstyle.xml](../config/checkstyle.xml) | Java 代码规范检查 |

---

## 3. 快速开始

### 3.1 环境要求

- JDK 17+
- Maven 3.8+
- MySQL 8.0+
- Redis 7.0+
- Docker & Docker Compose（部署用）

### 3.2 本地开发

```bash
# 1. 克隆项目
git clone <repository-url>
cd {project}

# 2. 配置数据库和Redis
# 修改 {project}-admin/src/main/resources/application-dev.yml
# 修改 {project}-api/src/main/resources/application-dev.yml

# 3. 编译项目
mvn clean compile

# 4. 启动服务
# Admin 服务
cd {project}-admin && mvn spring-boot:run

# API 服务
cd {project}-api && mvn spring-boot:run
```

### 3.3 API 文档访问

- Admin 模块: http://localhost:{admin-port}/doc.html
- API 模块: http://localhost:{api-port}/doc.html

---

## 4. 核心规范速查

### 4.1 命名规范

| 类型 | 规则 | 示例 |
|------|------|------|
| 包名 | 小写，点分隔 | `com.example.user` |
| 类名 | 大驼峰 | `UserService`, `OrderController` |
| 方法名 | 小驼峰 | `getUserById`, `createOrder` |
| 变量名 | 小驼峰 | `userId`, `orderList` |
| 常量名 | 大写下划线 | `MAX_PAGE_SIZE`, `STATUS_ENABLE` |
| 表名 | 小写下划线 | `user`, `order_item` |
| 字段名 | 小写下划线 | `user_id`, `created_at` |

### 4.2 接口URL格式

```
/{项目}/{端类型}/v{版本}/{模块}/{资源}/{操作}
```

| 端类型 | 说明 | 示例 |
|--------|------|------|
| `web` | 管理后台 | `/toy/web/v1/user/list` |
| `app` | 移动端/小程序 | `/toy/api/v1/user/profile` |
| `open` | 开放接口/设备端 | `/toy/open/v1/device/auth` |
| `callback` | 回调接口 | `/toy/callback/v1/payment/notify` |
| `internal` | 内部接口 | `/toy/internal/device/command` |

### 4.3 统一响应格式

```json
{
    "code": 0,
    "message": "成功",
    "data": { ... }
}
```

### 4.4 错误码分段

| 范围 | 模块 | 示例 |
|------|------|------|
| 0 | 成功 | SUCCESS(0) |
| 1xxxx | 通用错误 | PARAM_ERROR(10001) |
| 2xxxx | 用户模块 | USER_NOT_FOUND(20001) |
| 3xxxx | 订单模块 | ORDER_NOT_FOUND(30001) |
| 4xxxx | 商品模块 | PRODUCT_NOT_FOUND(40001) |
| 5xxxx | 支付模块 | PAYMENT_FAILED(50001) |

### 4.5 Git 提交规范

```
<type>: <subject>
```

| 类型 | 说明 |
|------|------|
| feat | 新功能 |
| fix | 修复bug |
| docs | 文档变更 |
| style | 代码格式 |
| refactor | 重构 |
| test | 测试相关 |
| chore | 构建/工具变更 |

---

## 5. 开发流程

### 5.1 新功能开发

```
1. 需求分析
   ├── 明确功能需求
   └── 确认接口设计

2. 数据库设计
   ├── 设计表结构
   └── 编写建表SQL

3. 代码开发（按顺序）
   ├── Entity 实体类
   ├── Mapper 接口 + XML
   ├── Service 接口 + 实现
   ├── DTO (Request/Response)
   └── Controller 控制器

4. 测试验证
   ├── 单元测试
   └── 接口测试

5. 代码提交
   └── 按规范提交Git
```

### 5.2 Bug 修复

```
1. 问题定位 → 2. 代码修复 → 3. 测试验证 → 4. 提交代码
```

---

## 6. 使用本规范

### 6.1 新项目使用

```bash
# 1. 复制规范目录到新项目
cp -r project-standards/ your-new-project/

# 2. 全局替换占位符
# {project} → 实际项目名
# {company} → 公司/组织名
# {admin-port} → 管理后台端口
# {api-port} → API服务端口

# 3. 按需裁剪配置
```

### 6.2 占位符说明

| 占位符 | 说明 | 示例 |
|--------|------|------|
| `{project}` | 项目名称 | `order-system` |
| `{project-name}` | 项目全名 | `订单管理系统` |
| `{company}` | 公司/组织 | `example` |
| `{module}` | 模块名 | `user`, `order` |
| `{Entity}` | 实体类名 | `User`, `Order` |
| `{entity}` | 实体变量名 | `user`, `order` |
| `{table_name}` | 数据库表名 | `user`, `order` |
