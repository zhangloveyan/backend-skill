---
name: proj-resume
description: 中断后快速恢复开发进度。用于对话中断后继续开发、新会话接续之前的工作、查看当前开发进度。
---

# 恢复开发

## 触发词

- "继续开发"
- "接着做"
- "上次做到哪了"
- "恢复开发"

---

## 执行流程

```
Step 1: 读取任务文档 → Step 2: 分析进度 → Step 3: 汇报状态 → Step 4: 继续开发
```

---

## Step 1: 读取任务文档

读取 `docs/task/` 下最新的 `*_任务.md` 文件（如有多个先让用户指定），以全流程任务文档为唯一事实来源。

**如果文件不存在：**
```
未找到任务文档。
可能的情况：
1. 还没有创建任务 → 使用 /proj-analyze-req 开始新需求
2. 任务文档路径不对 → 请确认 `docs/task/` 路径
```

---

## Step 2: 分析进度

从任务文档中提取：
1. **当前功能** - 正在开发的功能名称
2. **方案文档** - 关联的方案文档路径
3. **任务统计** - 各状态任务数量
4. **当前任务** - 状态为 `[~]` 的任务
5. **下一任务** - 第一个 `[ ]` 的任务
6. **阻塞任务** - 状态为 `[!]` 的任务
7. **当前阶段** - 流程状态总览中标记为进行中的阶段
8. **下一步指令** - 上下文快照中的下一动作

---

## Step 3: 汇报状态

```markdown
## 开发进度

**当前功能：** {功能名称}
**方案文档：** {路径}

**进度统计：**
- 已完成：{n} 项
- 进行中：{n} 项
- 待处理：{n} 项

**当前阶段：** {阶段名称}

**任务状态：**
- [x] 已完成任务1
- [x] 已完成任务2
- [~] 当前任务3 ← 进行中
- [ ] 待处理任务4

**上次停在：** {当前任务描述}

**下一步指令：** {下一动作}

是否继续开发？
```

---

## Step 4: 继续开发

用户确认后：

1. **有进行中任务 `[~]`** - 继续完成该任务
2. **无进行中任务** - 将下一个 `[ ]` 任务标记为 `[~]`
3. **所有任务已完成** - 询问是否归档或开始新需求

---

## 注意事项

1. **先汇报再动手** - 让用户确认后再继续
2. **检查阻塞** - 有阻塞任务要先处理
3. **保持上下文** - 必要时读取方案文档
4. **及时更新** - 恢复后记得更新任务状态
