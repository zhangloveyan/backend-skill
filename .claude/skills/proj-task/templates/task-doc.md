# 任务文档模板

## 使用规范

### 核心原则
- **必须按模板格式生成**：不能仅凭内容完整性判断，必须符合可跟踪格式
- **支持中断恢复**：任务状态清晰，对话中断后能快速恢复进度
- **实时状态更新**：任务进展时及时更新状态标记
- **不写细节**：仅记录流程状态、产物与上下文快照

### 状态标记说明
- `[ ]` 待完成任务
- `[~]` 进行中任务（同时只能有一个）
- `[x]` 已完成任务
- `[!]` 阻塞任务
- `[-]` 取消任务

### 更新时机
- **开始任务**：`[ ]` → `[~]`
- **完成任务**：`[~]` → `[x]`
- **代码提交**：在提交记录区域添加commit信息
- **任务归档**：完成的功能模块移至历史任务区
- **阶段推进**：同步更新流程状态、产物清单、上下文快照、下一步指令

---

## 模板格式

```markdown
# 开发任务

## 流程状态总览

| 阶段 | 状态 | 产物 |
|------|------|------|
| 需求分析 | [ ] | `docs/req/{YYYYMMDD}_{中文模块名}_需求.md` |
| 需求确认 | [ ] | — |
| 技术方案 | [ ] | `docs/design/{YYYYMMDD}_{中文模块名}_技术.md` |
| 方案确认 | [ ] | — |
| 任务拆分 | [ ] | 本文档 |
| 代码生成 | [ ] | 生成代码清单 |
| 业务开发 | [ ] | 关键文件清单 |
| 代码审查 | [ ] | 审查报告 |
| 生成测试 | [ ] | 测试代码 |
| 运行测试 | [ ] | 测试记录 |
| 用户确认 | [ ] | — |
| Git提交 | [ ] | 提交记录 |

## 产物清单

- 任务文档：`docs/task/{YYYYMMDD}_{中文模块名}_任务.md`
- 需求文档：`docs/req/{YYYYMMDD}_{中文模块名}_需求.md`（未生成）
- 技术方案：`docs/design/{YYYYMMDD}_{中文模块名}_技术.md`（未生成）
- SQL 脚本：`docs/sql/{YYYYMMDD}_{中文模块名}.sql`（未生成）
- 审查报告：`{待补充}`（未生成）
- 测试记录：`{待补充}`（未生成）

## 扩展产物

- {可选：部署/优化/重构/修复等产物路径}

## 上下文快照

- 功能名称：{中文模块名}
- 端类型：{Web/App/Both}
- 关键约束：{业务/技术约束}
- 风险/阻塞：{无/具体说明}
- 关键文件清单：{待补充}
- 备注：{补充信息}

## 下一步指令

- {下一动作与所需输入}

## 当前任务

### {日期} {中文模块名}

**任务清单：**

（方案确认后补充任务清单）

### 阶段一：数据库和基础结构
- [ ] 任务1：创建数据库表
- [ ] 任务2：扩展错误码
- [ ] 任务3：创建枚举类

### 阶段二：实体和数据访问层
- [ ] 任务4：创建实体类
- [ ] 任务5：创建Mapper接口

### 阶段三：DTO层
- [ ] 任务6：创建请求响应DTO

### 阶段四：业务服务层与控制器层
- [ ] 任务7：创建服务接口和实现
- [ ] 任务8：创建控制器

### 阶段五：测试和质量保证
- [ ] 任务9：代码审查和优化（使用/proj-review）
- [ ] 任务10：生成测试代码（使用/proj-gen-test）
- [ ] 任务11：运行测试并记录结果

**提交记录：**

- `{commit-hash}` {type}: {message}

---

---

## 历史任务

（已完成的任务归档到这里）
```

---

## 标准任务顺序

```markdown
- [ ] 创建数据库表
- [ ] 创建 Entity 实体类
- [ ] 创建 Mapper 接口和 XML
- [ ] 创建 Request DTO
- [ ] 创建 Response DTO
- [ ] 创建 Service 接口
- [ ] 创建 Service 实现类
- [ ] 创建 Controller（Web端）
- [ ] 创建 Controller（App端）
- [ ] 自测验证
```
